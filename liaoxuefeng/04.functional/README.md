# 函数式编程
函数就是面向过程程序设计的基本单元。    
前面就已经了解过，函数的名称也是一个变量，可以作为参数传入另一个函数。    

## 高阶函数
函数的参数中有另外的函数的函数名作为参数，那么这个函数就称为高阶函数。    

	def sample(func, x, y):
		return func(x) + func(y)

上述这个函数就是一个很简单的高阶函数。    

## map函数
Python内建了`map()`函数，函数的第一个参数是函数，第二个参数是一个可迭代对象`Iterable`。    
`map()`函数的作用就是将参数传入的第一个函数依次作用于第二个可迭代对象参数的每一个元素。    

	map(func, [x, y, z]) = [func(x), func(y), func(z)]

比如：将一个数字列表转换成字符串
	
	>>> list(map(str, [1,2,3,4,5]))
	>>> ['1','2','3','4','5']

## reduce函数
Python内建了`reduce()`函数，函数的第一个参数是函数，第二个参数是一个可迭代对象`Iterable`。    
`reduce()`函数的作用就是将参数传入的第一个函数逐层作用于第二个可迭代对象的每个元素。    

	reduce(func, [x, y, z]) = func(func(x, y), z)

比如：将一个数字列表求和

	>>> from functools import reduce
	>>> reduce((lambda x, y: x + y), [1, 2, 3, 4, 5])
	>>> 15

## filter函数
Python内建了`filter()`函数用于过滤序列，函数的第一个参数是函数，第二个参数是一个可迭代对象`Iterable`。    
`filter()`函数的作用就是根据第一个参数函数的返回值是`True`还是`False`作用于第二个可迭代对象是保留还是删除。     
比如：将一个数字列表中的偶数去掉    

	>>> list(filter(lambda x: x % 2 == 1, [1, 2, 3, 4, 5, 6]))
	>>> [1, 3, 5]

## sorted函数
Python内建的`sorted()`函数可以给一个序列排序，函数的第一个参数是列表，第二个参数是实现排序的函数`key`。    
如果`key`函数指定了函数，那么会作用第一个参数列表中的每一个元素，然后按照结果再排序。    
比如：将一个数字列表按照绝对值排序

	>>> sorted([1, -3, 2, 4], key = abs)
	>>> [1, 2, -3, 4]

## 返回函数
高阶函数除了可以接受函数作为参数之外，还可以将函数作为结果变量返回出去。    
比如：写一个不立即求值的不定参数的加法运算    

	def lazy_sum(*args):
		def sum():
			result = 0
			for item in args:
				result = result + item
			return result
		return sum

## 闭包
从上面的例子可以看到，返回的函数内部使用了局部变量，当函数返回之后，里面的局部变量还会被新函数引用。   
需要注意的一个问题，闭包中返回的函数没有立即执行，而是直到调用的时候才执行，因此这地方需要特别注意。    
举个例子：    

	def count():
		result = []
		for item in range(1, 4):
			def func():
				return item * item
			result.append(func)
		return result

然后引用`count()`函数，我们发现：

	>>> count1, count2, count3 = count()
	>>> count1()
	>>> 9
	>>> count2()
	>>> 9
	>>> count3()
	>>> 9

以上问题的原因：就是闭包中的函数在调用时才执行，调用时循环变量`item`都已经变成了`3`，那么结果就是`9`。    
因此，闭包中的函数尽量不引用循环变量，如果非要引用，外层需要新增加另外一个函数作为过渡。    

## 练习
1. 用`map()`函数将list中的字符串首字母大写。
2. 用`map()`和`reduce()`函数实现字符串转换成浮点型数字。
3. 用`filter()`函数筛选出一个列表中的回数【回数就是从左向右还是从右向左读都一样的数字，比如12321】。
4. 用闭包实现一个计数器。
